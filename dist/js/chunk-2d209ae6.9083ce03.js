(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d209ae6"],{a9a9:function(s,e,t){"use strict";t.r(e);var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"security-settings-info-view"},[t("a-form-model",{ref:"passForm",attrs:{model:s.passForm,rules:s.rules}},[t("a-form-model-item",{attrs:{"has-feedback":"",label:"密码",prop:"passOld"}},[t("a-input",{attrs:{type:"password"},model:{value:s.passForm.passOld,callback:function(e){s.$set(s.passForm,"passOld",e)},expression:"passForm.passOld"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"新的密码",prop:"pass"}},[t("a-input",{attrs:{type:"password"},model:{value:s.passForm.pass,callback:function(e){s.$set(s.passForm,"pass",e)},expression:"passForm.pass"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"确认",prop:"checkPass"}},[t("a-input",{attrs:{type:"password"},model:{value:s.passForm.checkPass,callback:function(e){s.$set(s.passForm,"checkPass",e)},expression:"passForm.checkPass"}})],1),t("a-form-model-item",[t("a-button",{attrs:{type:"primary"},on:{click:function(e){return s.submitForm("passForm")}}},[s._v(" 提交 ")]),t("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return s.resetForm("passForm")}}},[s._v(" 重置 ")])],1)],1)],1)},r=[],o=t("ed3b"),n={data:function(){var s=this,e=function(e,t,a){""===t?a(new Error("输入新的密码")):t.length<6?a(new Error("密码不得少于6个字符")):(""!==s.passForm.checkPass&&s.$refs.passForm.validateField("checkPass"),a())},t=function(e,t,a){""===t?a(new Error("确认密码")):t!==s.passForm.pass?a(new Error("两次输入的不一致")):a()};return{loading:!1,passForm:{passOld:"",pass:"",checkPass:""},rules:{passOld:[{required:!0,message:"输入当前密码",trigger:"blur"}],pass:[{required:!0,validator:e,trigger:"change"}],checkPass:[{required:!0,validator:t,trigger:"change"}]}}},methods:{submitForm:function(s){var e=this;this.$refs[s].validate((function(s){s&&(e.loading=!0,e.$http.post("/admin/updatePassword",e.passForm).then((function(s){var t=s.result;if("done"===t.status){e.$message.success("修改成功"),e.loading=!1;var a=5,r=o["a"].success({title:"成功",content:"修改密码成功,".concat(a,"后退出登录"),onOk:function(){return e.$store.dispatch("Logout").then((function(){e.$router.push({name:"login"})}))}}),n=setInterval((function(){a-=1,r.update({content:"修改密码成功,".concat(a,"后退出登录")})}),1e3);setTimeout((function(){clearInterval(n),r.destroy(),e.$store.dispatch("Logout").then((function(){e.$router.push({name:"login"})}))}),1e3*a)}else o["a"].error({title:"错误",content:"当前密码错误"})})))}))},resetForm:function(s){this.$refs[s].resetFields()}}},c=n,i=t("2877"),l=Object(i["a"])(c,a,r,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d209ae6.9083ce03.js.map