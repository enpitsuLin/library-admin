(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d209ae6"],{a9a9:function(s,e,a){"use strict";a.r(e);var t=function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"security-settings-info-view"},[a("a-form-model",{ref:"passForm",attrs:{model:s.passForm,rules:s.rules}},[a("a-form-model-item",{attrs:{"has-feedback":"",label:"密码",prop:"passOld"}},[a("a-input",{attrs:{type:"password"},model:{value:s.passForm.passOld,callback:function(e){s.$set(s.passForm,"passOld",e)},expression:"passForm.passOld"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"新的密码",prop:"pass"}},[a("a-input",{attrs:{type:"password"},model:{value:s.passForm.pass,callback:function(e){s.$set(s.passForm,"pass",e)},expression:"passForm.pass"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"确认",prop:"checkPass"}},[a("a-input",{attrs:{type:"password"},model:{value:s.passForm.checkPass,callback:function(e){s.$set(s.passForm,"checkPass",e)},expression:"passForm.checkPass"}})],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return s.submitForm("passForm")}}},[s._v(" 提交 ")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return s.resetForm("passForm")}}},[s._v(" 重置 ")])],1)],1)],1)},r=[],o=a("35ad"),n={data:function(){var s=this,e=function(e,a,t){""===a?t(new Error("输入新的密码")):a.length<6?t(new Error("密码不得少于6个字符")):(""!==s.passForm.checkPass&&s.$refs.passForm.validateField("checkPass"),t())},a=function(e,a,t){""===a?t(new Error("确认密码")):a!==s.passForm.pass?t(new Error("两次输入的不一致")):t()};return{loading:!1,passForm:{passOld:"",pass:"",checkPass:""},rules:{passOld:[{required:!0,message:"输入当前密码",trigger:"blur"}],pass:[{required:!0,validator:e,trigger:"change"}],checkPass:[{required:!0,validator:a,trigger:"change"}]}}},methods:{submitForm:function(s){var e=this;this.$refs[s].validate((function(s){s&&(e.loading=!0,e.$http.post("/admin/updatePassword",e.passForm).then((function(s){var a=s.result;if("done"===a.status){e.$message.success("修改成功"),e.loading=!1;var t=5,r=o["a"].success({title:"成功",content:"修改密码成功,".concat(t,"后退出登录"),onOk:function(){return e.$store.dispatch("Logout").then((function(){e.$router.push({name:"login"})}))}}),n=setInterval((function(){t-=1,r.update({content:"修改密码成功,".concat(t,"后退出登录")})}),1e3);setTimeout((function(){clearInterval(n),r.destroy(),e.$store.dispatch("Logout").then((function(){e.$router.push({name:"login"})}))}),1e3*t)}else o["a"].error({title:"错误",content:"当前密码错误"})})))}))},resetForm:function(s){this.$refs[s].resetFields()}}},c=n,i=a("5d22"),l=Object(i["a"])(c,t,r,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d209ae6.3c9bc15b.js.map